å®Œç’§ãªæµã‚Œã§ã™ã­ã€‚
æ¬¡ã¯ã€ã€ŒSRAM â†’ Arduino â†’ Macã€æ–¹å‘ã®èª­ã¿å‡ºã—ï¼‹å—ä¿¡æ§‹æˆã§ã™ã€‚


---

ğŸ§  æ¦‚è¦

è¦ç´ 	å†…å®¹

SRAMãƒãƒƒãƒ—	23LC512 Ã— 2ï¼ˆå„64KBï¼‰
Arduinoå´	SPIã§é †ã«2ãƒãƒƒãƒ—èª­ã¿å‡ºã—ã¦ã€Serialã«128KBé€ä¿¡
Macå´	Serialã§å—ä¿¡ã—ã€ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ« sram_dump.bin ã«ä¿å­˜
é€šä¿¡é€Ÿåº¦	115200bpsï¼ˆå‰ã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ï¼‰



---

âœ… Arduino Uno å´ã‚³ãƒ¼ãƒ‰ï¼ˆCï¼‰

ä»¥ä¸‹ã¯ã€å‰å›ã®æ›¸ãè¾¼ã¿ã‚³ãƒ¼ãƒ‰ã¨åŒã˜é…ç·šã§å‹•ãã€Œèª­ã¿å‡ºã—ç”¨ã‚¹ã‚±ãƒƒãƒã€ã§ã™ã€‚

#include <SPI.h>

#define SRAM1_CS 10
#define SRAM2_CS 9

#define SRAM_READ  0x03
#define MODE_BYTE  0x01
#define MODE_SEQUENTIAL 0x40

void setup() {
  Serial.begin(115200);
  SPI.begin();

  pinMode(SRAM1_CS, OUTPUT);
  pinMode(SRAM2_CS, OUTPUT);
  digitalWrite(SRAM1_CS, HIGH);
  digitalWrite(SRAM2_CS, HIGH);

  setSequentialMode(SRAM1_CS);
  setSequentialMode(SRAM2_CS);

  Serial.println("Type 'D' and press Enter to dump 128KB from SRAM.");
}

void loop() {
  if (Serial.available()) {
    char c = Serial.read();
    if (c == 'D' || c == 'd') {
      Serial.println("Dumping SRAM contents...");
      dumpSRAM();
      Serial.println("Done!");
    }
  }
}

// === ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãƒ¢ãƒ¼ãƒ‰è¨­å®š ===
void setSequentialMode(uint8_t csPin) {
  digitalWrite(csPin, LOW);
  SPI.transfer(MODE_BYTE);
  SPI.transfer(MODE_SEQUENTIAL);
  digitalWrite(csPin, HIGH);
}

// === SRAMã‹ã‚‰å…¨ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã£ã¦é€ä¿¡ ===
void dumpSRAM() {
  const uint32_t totalSize = 128UL * 1024UL;
  uint8_t data;

  // --- SRAM1 (0ã€œ65535)
  digitalWrite(SRAM1_CS, LOW);
  SPI.transfer(SRAM_READ);
  SPI.transfer(0x00);  // high address
  SPI.transfer(0x00);  // low address
  for (uint32_t i = 0; i < 65536UL; i++) {
    data = SPI.transfer(0x00);
    Serial.write(data);
  }
  digitalWrite(SRAM1_CS, HIGH);

  // --- SRAM2 (65536ã€œ131071)
  digitalWrite(SRAM2_CS, LOW);
  SPI.transfer(SRAM_READ);
  SPI.transfer(0x00);
  SPI.transfer(0x00);
  for (uint32_t i = 0; i < 65536UL; i++) {
    data = SPI.transfer(0x00);
    Serial.write(data);
  }
  digitalWrite(SRAM2_CS, HIGH);
}


---

âœ… Macå´ Python å—ä¿¡ã‚³ãƒ¼ãƒ‰

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ï¼š

1. åˆ©ç”¨å¯èƒ½ãªã‚·ãƒªã‚¢ãƒ«ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¦é¸æŠ


2. Arduinoã« 'D' ã‚³ãƒãƒ³ãƒ‰é€ä¿¡


3. 128KBï¼ˆ=131072ãƒã‚¤ãƒˆï¼‰ã‚’


